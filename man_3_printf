.TH _PRINTF 3 "December 2023" "Custom printf" "Linux Programmer's Manual"
.SH NAME
_printf \- custom formatted output conversion function
.SH SYNOPSIS
.nf
.B #include "main.h"
.PP
.BI "int _printf(const char *" format ", ...);"
.fi
.SH DESCRIPTION
The
.B _printf()
function produces output according to a
.I format
string and writes it to stdout, the standard output stream.
.PP
The
.I format
string is composed of zero or more directives. Ordinary characters (not %) are copied unchanged to the output stream. Conversion specifications are introduced by the character % and end with a conversion specifier.
.PP
This implementation supports the following flag characters for non-custom conversion specifiers:
.TP
.B +
Forces the result to include a sign (+ or -) for signed conversions. By default, only negative numbers include a sign.
.TP
.B space
If no sign is going to be written, a blank space is inserted before the value.
.TP
.B #
For o conversions, the first character of the output string is made zero (by prefixing a 0 if it was not zero already).
For x and X conversions, a nonzero result has the string "0x" (or "0X" for X conversions) prepended to it.
.SH CONVERSION SPECIFIERS
A character that specifies the type of conversion to be applied.
The conversion specifiers and their meanings are:
.TP
.B c
The
.B int
argument is converted to an
.BR "unsigned char" ,
and the resulting character is written.
.TP
.B s
The
.B "const char *"
argument is expected to be a pointer to an array of character type (pointer to a string). Characters from the array are written up to (but not including) a terminating null byte (\\0).
.TP
.B S
The
.B "const char *"
argument is expected to be a pointer to a string. Characters from the array are written up to (but not including) a terminating null byte (\\0). Non printable characters (0 < ASCII value < 32 or >= 127) are printed as \\x followed by the ASCII code value in hexadecimal (upper case - always 2 characters).
.TP
.B p
The
.B "void *"
argument is converted to a sequence of printable characters in hexadecimal format (as if by %#x or %#lx). The value is prefixed with '0x'. If the pointer is NULL, the string '(nil)' is printed.
.TP
.B d
The
.B int
argument is converted to signed decimal notation.
.TP
.B i
The
.B int
argument is converted to signed decimal notation.
.TP
.B b
The
.B "unsigned int"
argument is converted to binary notation.
.TP
.B u
The
.B "unsigned int"
argument is converted to unsigned decimal notation.
.TP
.B o
The
.B "unsigned int"
argument is converted to unsigned octal notation.
.TP
.B x
The
.B "unsigned int"
argument is converted to unsigned hexadecimal notation (lowercase).
.TP
.B X
The
.B "unsigned int"
argument is converted to unsigned hexadecimal notation (uppercase).
.TP
.B %
A '\%' is written. No argument is converted. The complete conversion specification is '\%\%'.
.SH FLAG CHARACTERS
The following flag characters are supported for non-custom conversion specifiers (d, i, u, o, x, X):
.TP
.B +
For signed conversions, always include a sign (+ or -).
Example: %+d prints +123 for positive numbers.
.TP
.B space
For signed conversions, include a space for positive numbers.
Example: % d prints " 123" for positive numbers.
.TP
.B #
For o conversion, force 0 prefix for nonzero numbers.
Example: %#o prints 0173 for 123.
For x conversion, force 0x prefix for nonzero numbers.
Example: %#x prints 0xff for 255.
For X conversion, force 0X prefix for nonzero numbers.
Example: %#X prints 0XFF for 255.
.SH RETURN VALUE
Upon successful return, the
.B _printf()
function returns the number of characters printed (excluding the null byte used to end output to strings).
.PP
If an output error is encountered, \-1 is returned.
.SH EXAMPLES
The following example demonstrates the use of
.BR _printf() with flags:
.PP
.in +4n
.EX
#include "main.h"

int main(void)
{
    _printf("Flag +: %+d\\n", 123);      /* prints "+123" */
    _printf("Flag space: % d\\n", 123);  /* prints " 123" */
    _printf("Flag # octal: %#o\\n", 123); /* prints "0173" */
    _printf("Flag # hex: %#x\\n", 255);  /* prints "0xff" */
    _printf("Flag # HEX: %#X\\n", 255);  /* prints "0XFF" */
    return (0);
}
.EE
.in
.SH BUGS
This implementation does not handle the following:
.TP
.B \(bu
Field width
.TP
.B \(bu
Precision
.TP
.B \(bu
Length modifiers
.TP
.B \(bu
Buffer handling like the C library printf
.SH SEE ALSO
.BR printf (3)
.SH AUTHORS
Developed by Holberton School students.
